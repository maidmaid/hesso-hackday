<html lang='fr'>
<head>
    <title>Sierre Zinal</title>

    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=PT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>
    <link href='https://netdna.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.css' rel='stylesheet' type='text/css'>
    <link href='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css' rel='stylesheet' type='text/css'>

    <link href='css/metricsgraphics.css' rel='stylesheet' type='text/css'>
    <link href='css/metricsgraphics-demo.css' rel='stylesheet' type='text/css'>
    <style>
        #stats { 
			position: relative; 
			width: 1200px;
			height: 600;
			margin:0 auto;
		}
        #graphics {
            width: 1200px;
            margin: 50px auto;
        }
        #toolbar {
            position: absolute;
            top: 20%;
            right: 0;
        }
		.active_datapoint {
			font-size:14px;
		}
        tr, td { padding: 5px; }
        .label { font-size: 15px !important; }
		
		.active {
		background:#efefef;
		}
    </style>

    <script src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js'></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js' charset='utf-8'></script>
    <script src='https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js'></script>
    <script src='js/metricsgraphics.min.js'></script>
</head>

<body>
    <div id="stats">
        <div id='toolbar'>
            <table>
                <tr>
                    <td><button class="btn btn-default active" onclick="render('1974h')">1974 Elites hommes</button></td>
                    <td></td>
                </tr>
                <tr>
                    <td><button class="btn btn-default"onclick="render('1984h')">1984 Elites hommes</button></td>
                    <td></td>
                </tr>
                <tr>
                    <td><button class="btn btn-default"onclick="render('1994h')">1994 Elites hommes</button></td>
                    <td></td>
                </tr>
                <tr>
                    <td><button class="btn btn-default" onclick="render('2004h')">2004 Elites hommes</button></td>
                    <td></td>
                </tr>
                <tr>
                    <td><button class="btn btn-default" onclick="render('2011h')">2011 Elites hommes</button></td>
                    <td><button class="btn btn-default" onclick="render('2011f')">2011 Elites femmes</button></td>
                </tr>
            </table>
        </div>
        <div id='graphics'></div>
    </div>
    <script>
        var g;
        
        title = '1974 Elites hommes';
        $('.btn').click(function() {

                $('.btn').removeClass('active');

                title = $(this).html();
                $(this).addClass('active');
        });

        function render(category)
        {
            g = d3.csv('data/zs.csv', function(data) {
                data_graphic({
                    title: title,
                    description: "Ecarts temporels par rapport au meilleur temps",
                    missing_is_zero: true,
                    data: data,
                    chart_type: 'histogram',
                    binned:true,
                    width: 1200,
                    height: 600,
                    target: '#graphics',
                    x_accessor: 'minute',
                    y_accessor: category,
                    max_y: 40,
                    max_x: 250,
                    bottom: 100,
                    left: 100,
                    x_label: "Ecart temporel par rapport au vainqueur",
                    xax_count: 25,
                    xax_format: function(d) { // Ne fonctionne pas avec les graphiques de type "Histogram" ?
                        var h = Math.floor(d / 60);
                        var m = d % 60;
                        return h + 'h' + m;
                    },
                    y_label: "Nombre de participants",
                    yax_count: 8
                })
            })
        }
        render('1974h');
        
        
        text
    </script>
</body>
</html>